console.log("Enhanced MCP Server Starting..."); console.log("Node.js version:", process.version); console.log("Platform:", process.platform); // Simple MCP server implementation to demonstrate basic functionality const http = require("http"); const fs = require("fs"); const path = require("path"); const PORT = 3000; process.on("uncaughtException", (err) => { console.error("Uncaught exception:", err); }); const server = http.createServer((req, res) => { try { console.log(`Received request: ${req.method} ${req.url}`); if (req.url.startsWith("/mcp/list-files")) { // List files in current directory const files = fs.readdirSync("."); res.writeHead(200, { "Content-Type": "application/json" }); res.end(JSON.stringify({ files })); } else if (req.url.startsWith("/mcp/read-file")) { // Read a file (query param: ?file=filename) const fileParam = req.url.split("?file=")[1]; if (fileParam && fs.existsSync(fileParam)) { const content = fs.readFileSync(fileParam, "utf8"); res.writeHead(200, { "Content-Type": "text/plain" }); res.end(content); } else { res.writeHead(404); res.end("File not found"); } } else { res.writeHead(200, { "Content-Type": "text/plain" }); res.end("MCP Server running. Available endpoints: /mcp/list-files, /mcp/read-file?file=filename"); } } catch (error) { console.error("Error handling request:", error); res.writeHead(500); res.end("Server error"); } }); try { server.listen(PORT, () => { console.log(`Server running at http://localhost:${PORT}/`); console.log("Available MCP operations:"); console.log("- List files: /mcp/list-files"); console.log("- Read file: /mcp/read-file?file=filename"); }); } catch (error) { console.error("Error starting server:", error); }
